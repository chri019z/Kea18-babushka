<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <title>object</title>


    <style>
        .templatemodtager {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            max-width: 1000px;
            margin: 0 auto;
            grid-gap: 20px;
        }

        .menuItem {
            border: 1px solid #0071BC;
            padding: 10px;
            border-radius: 10px;
            display: grid;
            grid-template-rows: 1fr 3fr 2fr 1fr 2fr;
            margin: 0 auto;
            max-height: 800px
        }

        .menuItem:nth-child(even) {
            background: #91BED4;
            border: 1px solid #0071BC;
        }

        .langbeskrivelse {
            text-align: justify;
            padding-top: 0;
        }

        .pris {
            margin-top: 40px;
        }

        img {
            width: 100%;

        }

        @media screen and (max-width:480px) {
            .templatemodtager {
                grid-template-columns: 1fr;
            }
    </style>
</head>

<body>


    <nav>
        <button id="filter-alle">Alle</button>
        <button id="filter-hovedretter">hovedretter</button>
        <button id="filter-forretter">forretter</button>
        <button id="filter-desserter">desserter</button>
        <button id="filter-drikkevare">drikkevare</button>
    </nav>

    <main>
        <h1 id=overskrift data-overskrift>Menu</h1>
    </main>

    <div class="templatemodtager">

    </div>

    <template class="menuTemplate">
    <div class="menuItem">
        <h1 class="navn"></h1>
        <div class="billede"></div>
        <h3 class="langbeskrivelse"></h3>
        <p class="oprindelsesregion"></p>
        <h2 class="pris"></h2>
    </div>
        </template>
    <script>
        let menu;


        document.addEventListener("DOMContentLoaded", loadJson)

        async function loadJson() {
            let menuListe = await fetch("menu.json");
            menu = await menuListe.json();
            console.log(menu)
            visMenu(menu, "Menu");

            let forretter = menu.filter(ret => ret.kategori == "forretter");
            let hovedretter = menu.filter(ret => ret.kategori == "hovedretter");
            let drikkevarer = menu.filter(ret => ret.kategori == "drikkevarer");
            let desserter = menu.filter(ret => ret.kategori == "desserter");

            document.querySelector("#filter-forretter").addEventListener("click", () => {
                visMenu(forretter, "Foretter")
            });
            document.querySelector("#filter-hovedretter").addEventListener("click", () => {
                visMenu(hovedretter, "Hovedretter")
            });
            document.querySelector("#filter-desserter").addEventListener("click", () => {
                visMenu(desserter, "Desserter")
            });
            document.querySelector("#filter-drikkevare").addEventListener("click", () => {
                visMenu(drikkevarer, "Drikkevare")
            });
            document.querySelector("#filter-alle").addEventListener("click", () => {
                visMenu(menu, "menu")
            });
        }






        function visMenu(menu, overskrift) {
            document.querySelector("[data-overskrift]").textContent = overskrift;
            let modtager = document.querySelector(".templatemodtager");
            let menuTemplate = document.querySelector(".menuTemplate");
            modtager.innerHTML = "";
            menu.forEach(hverItem => {
                let klon = menuTemplate.cloneNode(true).content;
                klon.querySelector(".navn").textContent = hverItem.navn;
                klon.querySelector(".billede").innerHTML = '<img src="babushka_assets/imgs/medium/' +
                    hverItem.billede + '-md.jpg" alt="' + hverItem.kortbeskrivelse + '">';
                klon.querySelector(".langbeskrivelse").textContent = hverItem.langbeskrivelse;
                klon.querySelector(".oprindelsesregion").textContent = hverItem.oprindelsesregion;
                klon.querySelector(".pris").textContent = hverItem.pris + ",- kroner";

                modtager.appendChild(klon)
            })
        }
    </script>
</body>

</html>
